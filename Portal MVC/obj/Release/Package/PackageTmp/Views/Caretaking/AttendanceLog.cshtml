@using Portal_MVC.Models
@model Portal_MVC.Models.AttendanceLogViewModel
@{
    ViewBag.Title = "Attendance Log";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

@using (Html.BeginForm("SubmitAttendance", "Caretaking", FormMethod.Post))
{
    Html.AntiForgeryToken();
<div class="">
    <div class="row">
        <div class="form-group col-lg-3 col-md-6 col-sm-12 col-xs-12">
            @Html.DropDownListFor(m => m.SelectedPropertyid, Model.EstateList, new { @class = "form-control" })
        </div>

    </div>

    <div class="row">
        <div class="form-group col-lg-3 col-md-6 col-sm-12 col-xs-12">
            @Html.DropDownListFor(m => m.SelectedAttendanceTypeID, Model.AttendanceTypes, new { @class = "form-control" })
        </div>

    </div>

    <div class="row">
        <div class="form-group col-lg-3 col-md-6 col-sm-12 col-xs-12">
            @Html.EJS().DateTimePicker("datetimepicker").Max(Model.MaxDate).Value(Model.VisitDate).Format("dd-MM-yyyy HH:mm").Render()
        </div>

    </div>

    <div class="row">
        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12" style="width:600px;">
            @Html.TextAreaFor(m => m.AttendanceDescription, new { @class = "form-control", @style = "height:400px; width:100%; display: block; max-width: none" })
            @Html.ValidationMessageFor(m => m.AttendanceDescription, "", new { @class = "text-danger", @style = "height:400px;" })
        </div>
        <div>
            @Html.TextBoxFor(m => m.ImageUrls, new { @class = "form-control", @style = "display:none;", @id = "ImageUrlsbox"})
        </div>
    </div>

</div>


    <div class="row">
     <div class="container col-lg-1 col-md-1 col-sm-3 col-xs-6">
            <button class="btn btn-primary mb-2" style="display: inline; margin-top: 5px" id="SelectImg1">
                <img src="/Assets/upload (1).svg" style="height: 25px; width:25px;" id="SelectImg1" />
            </button>
        </div>

    </div>

<div class="row">
    <div class="" style="margin: 10px;">
        <div id="ImgageContainer" style="display:block;">
            @if (!string.IsNullOrWhiteSpace(Model.ImageUrls))
            {
                string[] arr = Model.ImageUrls.Split();
                foreach (string s in arr)
                {
                    if (!string.IsNullOrWhiteSpace(s))
                    {
                        <img class="AttendanceImgContainer" src=@s style="display:inline-block;" />
                    }
                }
            }
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
        <div class="centreButton">
            <button class="btn btn-primary " value="SubmitAttendance" , id="customButton">Submit</button>
        </div>
    </div>
</div>
}
    <script>
        $(document).ready(function () {

            //UploadButton.preventDefault();
            //UploadButton.addEventListener('click', test)

            //function test(e) {
            //    e.preventDefault();
            //    alert('test')
            //}

            //function LaunchPicker(e) {
            //    //alert('launch');
            //    e.preventDefault();



            //    const client = filestack.init('ArmGdnP0QQ96qQPLxzzxZz');

            //    const options = {
            //        fromSources: ["local_file_system"],
            //        accept: [
            //            "image/jpeg",
            //            "image/jpg",
            //            "image/png",
            //            "image/bmp",
            //            "image/gif",
            //            "application/pdf"
            //        ],

            //        onUploadDone: file => {

            //            //var file1 = filesUploaded[0];
            //            //alert('onuploaddone');
            //            file.value = SelectedRateID;
            //            updateForm(file);
            //        }
            //    };
            //    //alert(SelectedRateID);
            //    client.picker(options).open();
            //}
        }
    </script>

